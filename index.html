<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <script src="scripts/riven.js"></script>
  <script src="scripts/riven.graph.js"></script>
  <script src="scripts/riven.nodes.js"></script>
  <link rel="stylesheet" type="text/css" href="links/reset.css"/>
  <link rel="stylesheet" type="text/css" href="links/fonts.css"/>
  <link rel="stylesheet" type="text/css" href="links/main.css"/>
  <title>Riven</title>
</head>
<body>
  <script>
    var RIVEN = new Riven_Graph();
    
    Ø("console").cast(ConsoleNode,{x:41,y:12})

    // General
    Ø("entry").cast(ParentNode,{x:1,y:2,w:8,h:12});
    Ø("model").cast(ParentNode,{x:9,y:2,w:13,h:12});
    Ø("view").cast(ParentNode,{x:26,y:2,w:18,h:12});
    Ø("render").cast(RenderNode,{x:40,y:8});

    // Entry
    Ø("entry").assoc([
      Ø("request").cast(RequestNode,{x:1,y:2}),
      Ø("mouse").create({x:1,y:4}),
      Ø("router").cast(RouterNode,{x:4,y:3,w:3,h:1})
    ])

    // Model

    Ø("model").assoc([
      Ø("parser").cast(ParserNode,{x:2,y:3,w:5,h:1}),
      Ø("db_ingredients").create({x:1,y:7}),
      Ø("db_recipes").create({x:1,y:6}),
      Ø("model_home").create({x:8,y:5,w:7,h:1}),
      Ø("model_about").create({x:8,y:6,w:7,h:1}),
      Ø("model_ingredients").create({x:8,y:7,w:7,h:1}),
      Ø("model_recipes").create({x:8,y:8,w:7,h:1})
    ])

    // View
    Ø("view").assoc([
      Ø("template").create({x:10,y:3,w:4,h:1}),
      Ø("header").create({x:14,y:2}),
      Ø("body").create({x:14,y:3}),
      Ø("footer").create({x:14,y:4}),
      Ø("view_home").create({x:2,y:5,w:7,h:1}),
      Ø("view_about").create({x:2,y:6,w:7,h:1}),
      Ø("view_ingredients").create({x:2,y:7,w:7,h:1}),
      Ø("view_recipes").create({x:2,y:8,w:7,h:1})
    ])

    // Ø("parser").connect(["console","model_home","model_about","model_ingredients","model_recipes"])
    // Ø("parser").connect(["console"])
    Ø("db_ingredients").connect("parser db","request")
    Ø("db_recipes").connect("parser db","request")
    // Ø("parser db").connect(["db_ingredients in","db_recipes in"],"request")
    // Ø("model_home").connect("db_ingredients","request")
    // Ø("model_about").connect("db_ingredients","request")
    // Ø("model_ingredients").connect("db_ingredients","request")
    // Ø("model_recipes").connect("db_ingredients","request")
    // Ø("model_home").connect("db_recipes","request")
    // Ø("model_about").connect("db_recipes","request")
    // Ø("model_ingredients").connect("db_recipes","request")
    // Ø("model_recipes").connect("db_recipes","request")

    Ø("template").connect(["header","body","footer"],"request")

    Ø("template").connect("console")
    Ø("model_home").connect("view_home")
    Ø("model_about").connect("view_about")
    Ø("model_ingredients").connect("view_ingredients")
    Ø("model_recipes").connect("view_recipes")

    Ø("view_home").connect("template")
    Ø("view_about").connect("template")
    Ø("view_ingredients").connect("template")
    Ø("view_recipes").connect("template")

    Ø("router").connect("parser")
    Ø("router").connect("console")
    Ø("template").connect("render")

    Ø("request").connect("router")
    Ø("mouse").connect("router")

    document.body.appendChild(RIVEN.el)
    document.body.appendChild(RIVEN.render_el)

    Ø("request").query()

    RIVEN.graph();
  </script>
</body>
</html>
